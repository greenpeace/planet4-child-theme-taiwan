{% extends "base.twig" %}

{% block content %}

	{% set disabled  = posts ? '' : 'disabled' %}
	{% set collapsed = posts ? '' : 'collapsed' %}
	{% set show      = posts ? 'show' : '' %}
	{% set expanded  = posts ? true : false %}

	{% include 'blocks/section-live-search.twig' %}

	<section class="advanced-search">

		<div class="ct-container">

			<!-- No posts found? -->
			{% if ( not posts ) %}
				<p class="nothing-found">
					<i>
						<small>{{ exception ?? search_strings.nothing_found }}</small>
					</i>
				</p>
			{% endif %}

			<p class="results-no">
				<b>{{ page_title|e('wp_kses_post')|raw }}</b>
			</p>

			<div class="multiple-search-result">
				{% if ( load_more.async ) %}
					{% set displayed_posts = paged_posts %}
				{% else %}
					{% set displayed_posts = posts %}
				{% endif %}
				<div class="results-list">
					{% for post in displayed_posts %}
						{% include ['tease-search.twig', 'tease-'~post.post_type~'.twig', 'tease-related-post.twig', 'tease.twig'] %}
					{% endfor %}
				</div>
				{% if ( load_more and posts|length > paged_posts|length ) %}
					<div class="has-load-more">
						<button class="button {{ load_more.async ? 'btn-load-more-async' : '' }} btn-load-more-click-scroll" data-current_page="{{ current_page }}" data-total_posts="{{ found_posts }}" data-posts_per_load="{{ load_more.posts_per_load }}">
							{{ load_more.button_text }}
						</button>
					</div>
				{% endif %}
				{% if ( pagination ) %}
					{{ fn( 'the_posts_pagination', pagination ) }}
				{% endif %}
			</div>

			{% if ( suggestions ) %}
				{% for suggestion in suggestions %}
					<p>{{ suggestion }}</p>
				{% endfor %}
			{% endif %}

		</div>
	</section>
{% endblock %}
